(this.webpackJsonpmoviedecks=this.webpackJsonpmoviedecks||[]).push([[0],{112:function(e,t,a){},113:function(e,t,a){},131:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(15),i=a.n(r),s=(a(112),a(113),a(26)),o=a(175),l=a(135),d=a(176),u=a(171),j=a(54),b=a(174),m=a(189),h=a(97),x=a(21),p=a(37),f=(a(118),p.a.initializeApp({apiKey:"AIzaSyCiRnK6knWhXbE88DIYmSnthIX-K62c-k8",authDomain:"moviedeck-fc661.firebaseapp.com",projectId:"moviedeck-fc661",storageBucket:"moviedeck-fc661.appspot.com",messagingSenderId:"224418985330",appId:"1:224418985330:web:8e840efd4828b9bee599eb"})),O=f.auth(),v=a(4),g=c.a.createContext(),N=function(){return Object(n.useContext)(g)},y=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(s.a)(a,2),r=c[0],i=c[1],o=Object(n.useState)(!0),l=Object(s.a)(o,2),d=l[0],u=l[1];Object(n.useEffect)((function(){return O.onAuthStateChanged((function(e){i(e),u(!1)}))}),[]);var j={currentUser:r,signUp:function(e,t){O.createUserWithEmailAndPassword(e,t).then((function(e){return p.a.firestore().collection("users").doc(e.user.uid).set({})})).catch((function(e){console.log(e)}))},signIn:function(e,t){return O.signInWithEmailAndPassword(e,t)},signOut:function(){return O.signOut()}};return Object(v.jsx)(g.Provider,{value:j,children:!d&&t})},C=a(96),S=a.n(C),k=a(177),w=Object(u.a)({btn:{margin:"1rem",backgroundColor:"white","&:hover":{backgroundColor:"#ECFDF5"}},appbar:{backgroundColor:"#8B5CF6"},toolbar:{height:"3rem",display:"flex",justifyContent:"space-between"},typo:{color:"black"},maindiv:{width:"100%",display:"flex",justifyContent:"flex-end"},links:{color:"black",fontSize:"1.5rem",textDecoration:"none",padding:"1rem"},home:{textDecoration:"none",color:"black"}});function T(){var e=N(),t=e.signOut,a=e.currentUser,n=c.a.useState(null),r=Object(s.a)(n,2),i=r[0],u=r[1],p=Boolean(i),f=w(),O=function(){window.confirm("Logout user ".concat(a.email,"?"))&&t()},g=Object(j.a)(),y=Object(b.a)(g.breakpoints.down("xs"));console.log(y);var C=function(){u(null)};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(o.a,{className:f.appbar,position:"fixed",children:Object(v.jsxs)(d.a,{className:f.toolbar,children:[Object(v.jsx)(l.a,{className:f.typo,variant:"h5",color:"secondary",children:Object(v.jsx)(x.b,{to:"/",activeClassName:"currentNavbar",className:f.home,children:"moviesDeck"})}),y?Object(v.jsxs)("div",{className:f.maindiv,children:[Object(v.jsx)(k.a,{onClick:function(e){u(e.currentTarget)},style:{padding:"0",color:"white"},children:Object(v.jsx)(S.a,{fontSize:"large"})}),Object(v.jsxs)(h.a,{id:"menu-appbar",anchorEl:i,keepMounted:!0,open:p,onClose:C,children:[Object(v.jsx)(m.a,{onClick:C,children:Object(v.jsx)(x.b,{className:f.links,activeClassName:"currentNavbar",to:"/Search",children:"Search"})}),a?Object(v.jsx)(m.a,{onClick:C,children:Object(v.jsx)(x.b,{className:f.links,activeClassName:"currentNavbar",to:"/Favorites",children:"Watchlists"})}):Object(v.jsxs)(m.a,{onClick:C,children:[" ",Object(v.jsx)(x.b,{className:f.links,activeClassName:"currentNavbar",to:"/Signup",children:"Sign up"})]}),a?Object(v.jsx)(m.a,{onClick:C,children:Object(v.jsx)(x.b,{activeClassName:"currentNavbar",onClick:O,className:f.links,to:"/Logout",children:"Logout"})}):Object(v.jsxs)(m.a,{onClick:C,children:[" ",Object(v.jsx)(x.b,{className:f.links,activeClassName:"currentNavbar",to:"/Signin",children:"Sign in"})]})]})]}):Object(v.jsxs)("div",{children:[Object(v.jsx)(x.b,{className:f.links,activeClassName:"currentNavbar",to:"/Search",children:"Search"}),a?Object(v.jsx)(x.b,{className:f.links,activeClassName:"currentNavbar",to:"/Favorites",children:"Watchlists"}):Object(v.jsx)(x.b,{className:f.links,activeClassName:"currentNavbar",to:"/Signup",children:"Sign up"}),a?Object(v.jsx)(x.b,{activeClassName:"currentNavbar",onClick:O,className:f.links,to:"/Logout",children:"Logout"}):Object(v.jsx)(x.b,{className:f.links,activeClassName:"currentNavbar",to:"/Signin",children:"Sign in"})]})]})})})}var I=a(34),D=a.n(I),E=a(46),F=a(187),R=a(185),B=a(178),M=a(180),_=a(181),A=a(179),P=a(19),U=Object(u.a)({cardcontent:{padding:"1rem 1rem",backgroundColor:"#818CF8",display:"flex",flexDirection:"column"},cardimg:{height:"400px",width:"100%",objectFit:"cover"},title:{color:"black",alignSelf:"flex-start",textAlign:"start"},delete:{padding:"0",background:"red","&:hover":{backgroundColor:"#F87171"}}});function W(e){var t,a=U(),n=N().currentUser;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(B.a,{className:a.card,children:Object(v.jsxs)(A.a,{children:[Object(v.jsx)("div",{className:"imagediv",children:Object(v.jsx)(M.a,{className:a.cardimg,component:"img",height:"350",alt:"not render",image:e.imgUrl?"https://image.tmdb.org/t/p/w1280"+e.imgUrl:"https://images.unsplash.com/photo-1543536448-d209d2d13a1c?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTB8fG1vdmllfGVufDB8fDB8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"})}),Object(v.jsxs)(_.a,{className:a.cardcontent,children:[Object(v.jsx)(l.a,{className:a.title,children:e.movieTitle}),Object(v.jsx)(l.a,{id:"rating",className:(t=e.movieRating,t>7?"green":t>5&&t<7?"yellow":"red"),children:e.movieRating}),e.createdAt&&Object(v.jsx)(k.a,{onClick:function(){window.confirm("Are you sure you want to delete ".concat(e.movieTitle))&&(p.a.firestore().collection("users").doc(n.uid).collection("movies").doc(e.id).delete(),P.toast.success("".concat(e.movieTitle," successfully deleted"),{position:P.toast.POSITION.BOTTOM_CENTER,autoClose:1500}))},className:a.delete,children:"Delete"})]})]})})})}var q=a(182),z=a(190),L=a(188),H=a(183),G=a(184),K=a(186);function V(e){var t,a=e.currentMovie,n=e.setSelectedMovie,c=N().currentUser;return Object(v.jsx)(K.a.div,{initial:{opacity:0},animate:{opacity:1},onClick:function(e){e.target.classList.contains("main-modal")&&n(null)},className:"main-modal",children:Object(v.jsxs)("div",{className:"sub-modal",children:[Object(v.jsx)(K.a.img,{src:a.backdrop_path?"https://image.tmdb.org/t/p/w1280"+a.backdrop_path:"https://images.unsplash.com/photo-1543536448-d209d2d13a1c?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTB8fG1vdmllfGVufDB8fDB8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",alt:"not render"}),Object(v.jsxs)("div",{className:"modal-overview",children:[Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)("h3",{style:{margin:"0.5rem 0 0.5rem 1rem"},children:"Overview"}),c&&Object(v.jsx)("button",{className:"addButton",onClick:function(){try{p.a.firestore().collection("users").doc(c.uid).collection("movies").add({title:a.title,image:a.poster_path,rating:a.vote_average,createdAt:p.a.firestore.FieldValue.serverTimestamp()}),P.toast.success("".concat(a.title," is added to watch list"),{position:P.toast.POSITION.BOTTOM_CENTER,autoClose:1500})}catch(e){P.toast.error("Failed to add movie ".concat(a.title),{position:P.toast.POSITION.BOTTOM_CENTER,autoClose:1500})}},children:"+"})]}),Object(v.jsx)("p",{className:"over-para",children:a.overview}),Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)("h3",{children:"Rating"}),Object(v.jsx)("p",{className:(t=a.vote_average,t>=7?"green":t<7&&t>4?"yellow":"red"),children:a.vote_average})]})]})]})})}function Y(){var e=[],t=Object(n.useState)(!0),a=Object(s.a)(t,2),c=(a[0],a[1],Object(n.useState)()),r=Object(s.a)(c,2),i=r[0],o=r[1],d=Object(n.useState)(0),j=Object(s.a)(d,2),b=j[0],m=j[1],h=Object(n.useState)([]),x=Object(s.a)(h,2),p=x[0],f=x[1],O=Object(n.useState)(null),g=Object(s.a)(O,2),N=g[0],y=g[1],C=function(){var t=Object(E.a)(D.a.mark((function t(a){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(""),a.preventDefault(),console.log("formhandler"),t.next=5,fetch("https://api.themoviedb.org/3/search/movie?&api_key=04c35731a5ee918f014970082a0088b1&query="+i).then((function(e){return e.json()})).then((function(t){console.log(b),console.log(t.results),t.results.filter((function(t){t.vote_average<=parseInt(b)&&e.push(t),f(e)}))}));case 5:console.log(b),console.log(p),o(""),m("");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=Object(u.a)({textfield:{width:"24rem",backgroundClip:"#C4B5FD",margin:"1rem",textTransform:"uppercase"},typo:{margin:"1rem",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},submitBtn:{alignSelf:"center"}})();return Object(v.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",margin:"5rem auto"},children:[Object(v.jsx)(l.a,{variant:"h4",className:S.typo,color:"primary",children:"Search movies"}),Object(v.jsxs)("form",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},onSubmit:C,children:[Object(v.jsx)(F.a,{required:!0,value:i,color:"primary",className:S.textfield,onChange:function(e){return o(e.target.value.toLowerCase())},label:"Search",placeholder:"Search movies...",variant:"filled"}),Object(v.jsxs)("div",{style:{alignSelf:"center",padding:"1rem"},children:[Object(v.jsx)(q.a,{children:"Rating"}),Object(v.jsx)(z.a,{"aria-label":"gender",name:"gender1",value:b,onChange:function(e){b=e.target.value,m(b)},children:Object(v.jsx)(H.a,{value:"5",control:Object(v.jsx)(L.a,{required:!0}),label:"<5"})})]}),Object(v.jsx)(k.a,{type:"submit",className:S.submitBtn,variant:"outlined",children:"Search"})]}),Object(v.jsx)(G.a,{children:Object(v.jsxs)(R.a,{container:!0,spacing:4,children:[0!=p.length?p.map((function(e){return Object(v.jsx)(R.a,{xs:6,sm:4,lg:3,onClick:function(){y(e)},item:!0,children:Object(v.jsx)(W,{imgUrl:e.poster_path,movieTitle:e.title,movieRating:e.vote_average})},e.id)})):Object(v.jsx)("div",{style:{width:"100%",margin:"3rem",fontSize:"1.5rem",color:"red",display:"flex",justifyContent:"center"},children:"No movies found"}),Object(v.jsx)("div",{children:N&&Object(v.jsx)(V,{currentMovie:N,setSelectedMovie:y})})]})})]})}var J=a(20),X=a(64);function Z(){var e,t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(null),o=Object(s.a)(i,2),l=o[0],d=o[1];Object(n.useEffect)((function(){j()}),[]);var j=function(){var e=Object(E.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=04c35731a5ee918f014970082a0088b1&page=1").then((function(e){return e.json()})).then((function(e){console.log(e.results),c=e.results,r(c)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=Object(u.a)({toolbar:{marginTop:"8rem"},cardcontent:{backgroundColor:"#818CF8",maxHeight:"100vh"},cardimg:{minWidth:"100%",minHeight:"100%",maxWidth:"150%",objectFit:"fill"},div:(e={display:"flex",margin:"80px auto",maxHeight:"60%",maxWidth:"20%"},Object(X.a)(e,"display","block"),Object(X.a)(e,"boxShadow","0 0 2px 1px rgba(0, 0, 0, 0.5)"),e),title:{color:"black"},main:{top:0,left:0,position:"fixed",width:"100%",height:"100%",background:"rgba(139, 150, 143, 0.5)"},overview:{fontSize:"1rem",bottom:0,left:0,right:0},gridContainer:{padding:"1rem 2rem"}})();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:b.toolbar}),Object(v.jsxs)(G.a,{children:[Object(v.jsx)(R.a,{container:!0,spacing:4,children:c.map((function(e){return Object(v.jsx)(R.a,{classname:b.gridItem,xs:6,onClick:function(){d(e)},sm:4,lg:3,item:!0,children:Object(v.jsx)(W,{imgUrl:e.poster_path,movieTitle:e.title,movieRating:e.vote_average})},e.id)}))}),Object(v.jsx)("div",{children:l&&Object(v.jsx)(V,{currentMovie:l,setSelectedMovie:d})})]})]})}a(91),a(130);P.toast.configure();var Q=Object(u.a)({textfield:{margin:"1rem",width:"17rem"},cardcontent:{flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center"},form:{flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center"}});function $(){var e=Q(),t=Object(J.g)(),a=Object(n.useRef)(""),c=Object(n.useRef)(""),r=Object(n.useRef)(""),i=N(),o=i.signUp,d=(i.currentUser,Object(n.useState)()),u=Object(s.a)(d,2),j=(u[0],u[1]),b=function(){var e=Object(E.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c.current.value===r.current.value){e.next=5;break}return P.toast.error("Password does not match",{position:P.toast.POSITION.BOTTOM_CENTER,autoClose:1500}),r.current.value="",e.abrupt("return");case 5:return e.prev=5,j(""),e.next=9,o(a.current.value,c.current.value);case 9:P.toast.success("Account created successfully!!",{position:P.toast.POSITION.BOTTOM_CENTER,autoClose:1500}),t.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),P.toast.error("Failed to sign in!!",{position:P.toast.POSITION.BOTTOM_CENTER,autoClose:1500});case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"sub-container",children:Object(v.jsx)(B.a,{className:e.card,variant:"outlined",children:Object(v.jsxs)(_.a,{className:e.cardcontent,children:[Object(v.jsxs)("form",{className:e.form,onSubmit:b,children:[Object(v.jsx)(l.a,{variant:"h4",className:"title",children:"Sign Up"}),Object(v.jsx)(F.a,{required:!0,className:e.textfield,type:"email",inputRef:a,placeholder:"Enter email:",label:"Email",variant:"filled"}),Object(v.jsx)(F.a,{required:!0,inputRef:c,className:e.textfield,type:"password",placeholder:"Enter password:",label:"Password",variant:"filled"}),Object(v.jsx)(F.a,{required:!0,inputRef:r,className:e.textfield,type:"password",placeholder:"Re-enter password:",label:"Confirm password",variant:"filled"}),Object(v.jsx)(k.a,{type:"submit",variant:"contained",color:"primary",children:"Sign up"})]}),Object(v.jsxs)(l.a,{variant:"body1",children:["Already have an account?",Object(v.jsx)(x.b,{style:{textDecoration:"none"},to:"/Signin",children:"Sign in"})]})]})})})})}P.toast.configure();var ee=Object(u.a)({textfield:{margin:"1rem",width:"17rem"},cardcontent:{flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center"},form:{flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center"}});function te(){var e=ee(),t=N(),a=t.signIn,c=(t.currentUser,Object(J.g)()),r=Object(n.useRef)(),i=Object(n.useRef)(),s=function(){var e=Object(E.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r.current.value),t.preventDefault(),e.prev=2,e.next=5,a(r.current.value,i.current.value);case 5:P.toast.success("Signed in successful",{position:P.toast.POSITION.BOTTOM_CENTER,autoClose:1500}),c.push("/"),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),P.toast.error("Invalid email or password",{position:P.toast.POSITION.BOTTOM_CENTER,autoClose:1500}),r.current.value="",i.current.value="";case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"sub-container",children:Object(v.jsx)(B.a,{className:e.card,variant:"outlined",children:Object(v.jsxs)(_.a,{className:e.cardcontent,children:[Object(v.jsxs)("form",{className:e.form,onSubmit:s,children:[Object(v.jsx)(l.a,{variant:"h4",className:"title",children:"Sign In"}),Object(v.jsx)(F.a,{inputRef:r,required:!0,className:e.textfield,type:"email",placeholder:"Enter email:",label:"Email",variant:"filled"}),Object(v.jsx)(F.a,{inputRef:i,required:!0,className:e.textfield,type:"password",placeholder:"Enter password:",label:"Password",variant:"filled"}),Object(v.jsx)(k.a,{variant:"contained",type:"submit",color:"primary",children:"Sign in"})]}),Object(v.jsxs)(l.a,{variant:"body1",children:["Don't have an account?",Object(v.jsx)(x.b,{style:{textDecoration:"none"},to:"/Signup",children:"Sign up"})]})]})})})})}var ae=a(81),ne=function(e){var t=N().currentUser,a=Object(n.useState)([]),c=Object(s.a)(a,2),r=c[0],i=c[1];return Object(n.useEffect)((function(){p.a.firestore().collection("users").doc(t.uid).collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(ae.a)(Object(ae.a)({},e.data()),{},{id:e.id}))})),i(t)}))}),[e]),{favorites:r}};function ce(){var e=ne("movies").favorites,t=Object(u.a)({toolbar:{marginTop:"8rem"},cardcontent:{backgroundColor:"#818CF8",maxHeight:"100vh"},cardimg:{minWidth:"100%",minHeight:"100%",maxWidth:"150%",objectFit:"fill"},div:{display:"flex",margin:"80px auto",maxHeight:"60%",maxWidth:"20%",boxShadow:"0 0 2px 1px rgba(0, 0, 0, 0.5)"},title:{color:"black"},main:{top:0,left:0,position:"fixed",width:"100%",height:"100%",background:"rgba(139, 150, 143, 0.5)"},overview:{fontSize:"1rem",bottom:0,left:0,right:0},gridContainer:{padding:"1rem 2rem"}})();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:t.toolbar}),Object(v.jsx)(G.a,{children:Object(v.jsx)(R.a,{container:!0,spacing:4,children:e.map((function(e){return Object(v.jsx)(R.a,{xs:6,sm:4,lg:3,item:!0,children:Object(v.jsx)(W,{id:e.id,imgUrl:e.image,movieTitle:e.title,movieRating:e.rating,createdAt:e.createdAt})},e.id)}))})})]})}var re=function(){return Object(v.jsx)("div",{style:{display:"flex",flexDirection:"column"},className:"App",children:Object(v.jsx)(y,{children:Object(v.jsxs)(x.a,{children:[Object(v.jsx)(T,{}),Object(v.jsxs)(J.d,{children:[Object(v.jsx)(J.b,{exact:!0,path:"/",children:Object(v.jsx)(Z,{})}),Object(v.jsx)(J.b,{exact:!0,path:"/Search",children:Object(v.jsx)(Y,{})}),Object(v.jsx)(J.b,{exact:!0,path:"/Signup",children:Object(v.jsx)($,{})}),Object(v.jsx)(J.b,{exact:!0,path:"/Signin",children:Object(v.jsx)(te,{})}),Object(v.jsx)(J.b,{exact:!0,path:"/Favorites",children:Object(v.jsx)(ce,{})}),Object(v.jsx)(J.a,{to:"/"})]})]})})})},ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,191)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};i.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(re,{})}),document.getElementById("root")),ie()}},[[131,1,2]]]);
//# sourceMappingURL=main.dff0d633.chunk.js.map